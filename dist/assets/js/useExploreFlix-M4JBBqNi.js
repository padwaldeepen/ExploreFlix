var e=(e,t,l)=>new Promise(((n,r)=>{var u=e=>{try{i(l.next(e))}catch(t){r(t)}},a=e=>{try{i(l.throw(e))}catch(t){r(t)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(u,a);i((l=l.apply(e,t)).next())}));import{r as t}from"./router-BOZkTABG.js";import{s as l,c as n,g as r,b as u,a}from"./exploreflixApi-C44BPbjv.js";const i=()=>{const[i,c]=t.useState([]),[s,o]=t.useState([]),[f,d]=t.useState([]),[y,h]=t.useState([]),[m,g]=t.useState(!0),[C,b]=t.useState(null),k=t.useRef(!1),p=t.useRef(!1),v=t.useRef(!1),S=t.useRef(!1),x=t.useMemo((()=>i.filter((e=>e&&e.id&&e.title))),[i]),F=t.useMemo((()=>s.filter((e=>e&&e.id&&e.title))),[s]),P=t.useMemo((()=>f.filter((e=>e&&e.id&&e.title))),[f]),R=t.useMemo((()=>y.filter((e=>e&&e.id&&e.title))),[y]),M=t.useCallback((t=>e(null,null,(function*(){if(!t.trim())return[];try{b(null);return(yield l(t)).filter((e=>e&&e.id&&e.title))}catch(e){return b("Search failed. Please try again."),[]}}))),[]),j=t.useCallback((()=>e(null,null,(function*(){if(!k.current)try{b(null);const e=yield n();c(e),k.current=!0}catch(e){b("Failed to load trending content"),k.current=!0}}))),[]),w=t.useCallback((()=>e(null,null,(function*(){if(!p.current)try{b(null);const e=yield r();o(e),p.current=!0}catch(e){b("Failed to load movies"),p.current=!0}}))),[]),A=t.useCallback((()=>e(null,null,(function*(){if(!v.current)try{b(null);const e=yield u();d(e),v.current=!0}catch(e){b("Failed to load anime"),v.current=!0}}))),[]),E=t.useCallback((()=>e(null,null,(function*(){if(!S.current)try{b(null);const e=yield a();h(e),S.current=!0}catch(e){b("Failed to load series"),S.current=!0}}))),[]),B=t.useCallback((e=>{if(!x||0===x.length)return[];if("all"===e)return x;const t=x.filter((t=>t.type===e));return 0===t.length&&"all"!==e?x.slice(0,8):t}),[x]),L=t.useCallback((()=>x&&0!==x.length?x.slice(0,4):[]),[x]),q=t.useCallback((()=>x&&0!==x.length?x.slice(-4).reverse():[]),[x]);return t.useEffect((()=>{e(null,null,(function*(){g(!0);try{yield Promise.all([j(),w(),A(),E()])}catch(e){b("Failed to load content")}finally{g(!1)}}))}),[j,w,A,E]),{trendingContent:x,movies:F,anime:P,series:R,isLoading:m,error:C,searchContent:M,getContentByCategory:B,getEditorPicks:L,getRecentlyAdded:q}};export{i as u};
