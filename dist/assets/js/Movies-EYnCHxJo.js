import{j as e,m as a}from"./animations-zlTdoH7j.js";import{r as s}from"./router-BOZkTABG.js";import{C as t}from"./ContentCard-BMrhgNJs.js";import{g as r}from"./exploreflixApi-C44BPbjv.js";import{s as l}from"./Movies.module--EkePmUd.js";import{L as i}from"./index-Dn0s-eHs.js";import{S as n}from"./icons-DLPi5bHb.js";import"./vendor-Cx84Lukz.js";const o=()=>{const[o,c]=s.useState([]),[d,h]=s.useState([]),[m,u]=s.useState(""),[p,v]=s.useState("all"),[j,x]=s.useState("all"),[y,f]=s.useState("title"),[g,N]=s.useState(!0),[C,S]=s.useState(null);s.useEffect((()=>{var e,a,s;e=null,a=null,s=function*(){try{N(!0),S(null);const e=yield r();c(e),h(e)}catch(e){S("Failed to load movies")}finally{N(!1)}},new Promise(((t,r)=>{var l=e=>{try{n(s.next(e))}catch(a){r(a)}},i=e=>{try{n(s.throw(e))}catch(a){r(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,i);n((s=s.apply(e,a)).next())}))}),[]),s.useEffect((()=>{w()}),[o,m,p,j,y]);const w=()=>{let e=[...o];m&&(e=e.filter((e=>e.title.toLowerCase().includes(m.toLowerCase())||e.plot&&e.plot.toLowerCase().includes(m.toLowerCase())))),"all"!==p&&(e=e.filter((e=>{var a;return null==(a=e.genre)?void 0:a.toLowerCase().includes(p.toLowerCase())}))),"all"!==j&&(e=e.filter((e=>e.year===j))),e.sort(((e,a)=>{switch(y){case"title":return e.title.localeCompare(a.title);case"year":return(a.year||"").localeCompare(e.year||"");case"rating":return parseFloat(a.rating||"0")-parseFloat(e.rating||"0");default:return 0}})),h(e)},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return g?e.jsx(i,{}):C?e.jsxs("div",{className:l.errorContainer,children:[e.jsx("h3",{children:"Error loading movies"}),e.jsx("p",{children:C}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Try Again"}),e.jsx("p",{style:{marginTop:"1rem",color:"#aaa"},children:"If this keeps happening, our movie API may be down. Please try again later or check your connection."})]}):e.jsx("div",{className:l.moviesPage,children:e.jsxs("div",{className:l.container,children:[e.jsx(a.div,{className:l.header,initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:l.headerContent,children:[e.jsxs("h1",{className:l.pageTitle,children:[e.jsx("span",{className:l.titleAccent,children:"Movies"})," Collection"]}),e.jsx("p",{className:l.pageSubtitle,children:"Discover the latest and greatest films from around the world"})]})}),e.jsxs(a.div,{className:l.controls,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:l.searchContainer,children:[e.jsx(n,{className:l.searchIcon,size:20}),e.jsx("input",{type:"text",placeholder:"Search movies...",value:m,onChange:e=>{return a=e.target.value,void u(a);var a},className:l.searchInput})]}),e.jsxs("div",{className:l.filters,children:[e.jsxs("select",{value:p,onChange:e=>v(e.target.value),className:l.filterSelect,children:[e.jsx("option",{value:"all",children:"All Genres"}),(()=>{const e=new Set;return o.forEach((a=>{a.genre&&a.genre.split(", ").forEach((a=>e.add(a)))})),Array.from(e).sort()})().map((a=>e.jsx("option",{value:a,children:a},a)))]}),e.jsxs("select",{value:j,onChange:e=>x(e.target.value),className:l.filterSelect,children:[e.jsx("option",{value:"all",children:"All Years"}),(()=>{const e=new Set(o.map((e=>e.year)).filter(Boolean));return Array.from(e).sort(((e,a)=>(a||"").localeCompare(e||"")))})().map((a=>e.jsx("option",{value:a,children:a},a)))]}),e.jsxs("select",{value:y,onChange:e=>f(e.target.value),className:l.filterSelect,children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"year",children:"Sort by Year"}),e.jsx("option",{value:"rating",children:"Sort by Rating"})]})]})]}),e.jsxs(a.div,{className:l.results,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:l.resultsHeader,children:[e.jsxs("h2",{className:l.resultsTitle,children:[d.length," ",1===d.length?"Movie":"Movies"," Found"]}),m&&e.jsxs("p",{className:l.searchQuery,children:['Showing results for "',m,'"']})]}),d.length>0?e.jsx("div",{className:l.moviesGrid,children:d.map(((s,r)=>e.jsx(a.div,{variants:b,transition:{delay:.1*r},children:e.jsx(t,{item:s})},`${s.id}-${r}`)))}):e.jsxs("div",{className:l.noResults,children:[e.jsx("h3",{children:"No movies found"}),e.jsx("p",{children:"Try adjusting your search terms or filters"})]})]})]})})};export{o as Movies};
