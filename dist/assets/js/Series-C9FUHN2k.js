import{j as e,m as s}from"./animations-zlTdoH7j.js";import{r as a}from"./router-BOZkTABG.js";import{C as r}from"./ContentCard-BMrhgNJs.js";import{a as t}from"./exploreflixApi-C44BPbjv.js";import{s as l}from"./Movies.module--EkePmUd.js";import{L as i}from"./index-Dn0s-eHs.js";import{S as n}from"./icons-DLPi5bHb.js";import"./vendor-Cx84Lukz.js";const o=()=>{const[o,c]=a.useState([]),[d,h]=a.useState([]),[u,m]=a.useState(""),[p,j]=a.useState("all"),[v,x]=a.useState("all"),[y,f]=a.useState("title"),[g,N]=a.useState(!0),[C,S]=a.useState(null);a.useEffect((()=>{var e,s,a;e=null,s=null,a=function*(){try{N(!0),S(null);const e=yield t();c(e),h(e)}catch(e){S("Failed to load series")}finally{N(!1)}},new Promise(((r,t)=>{var l=e=>{try{n(a.next(e))}catch(s){t(s)}},i=e=>{try{n(a.throw(e))}catch(s){t(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,i);n((a=a.apply(e,s)).next())}))}),[]),a.useEffect((()=>{w()}),[o,u,p,v,y]);const w=()=>{let e=[...o];u&&(e=e.filter((e=>e.title.toLowerCase().includes(u.toLowerCase())||e.plot&&e.plot.toLowerCase().includes(u.toLowerCase())))),"all"!==p&&(e=e.filter((e=>{var s;return null==(s=e.genre)?void 0:s.toLowerCase().includes(p.toLowerCase())}))),"all"!==v&&(e=e.filter((e=>e.year===v))),e.sort(((e,s)=>{switch(y){case"title":return e.title.localeCompare(s.title);case"year":return(s.year||"").localeCompare(e.year||"");case"rating":return parseFloat(s.rating||"0")-parseFloat(e.rating||"0");default:return 0}})),h(e)},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return g?e.jsx(i,{}):C?e.jsxs("div",{className:l.errorContainer,children:[e.jsx("h3",{children:"Error loading series"}),e.jsx("p",{children:C}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Try Again"}),e.jsx("p",{style:{marginTop:"1rem",color:"#aaa"},children:"If this keeps happening, our series API may be down. Please try again later or check your connection."})]}):e.jsx("div",{className:l.moviesPage,children:e.jsxs("div",{className:l.container,children:[e.jsx(s.div,{className:l.header,initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs("div",{className:l.headerContent,children:[e.jsxs("h1",{className:l.pageTitle,children:[e.jsx("span",{className:l.titleAccent,children:"Series"})," Collection"]}),e.jsx("p",{className:l.pageSubtitle,children:"Discover the best TV series from around the world"})]})}),e.jsxs(s.div,{className:l.controls,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[e.jsxs("div",{className:l.searchContainer,children:[e.jsx(n,{className:l.searchIcon,size:20}),e.jsx("input",{type:"text",placeholder:"Search series...",value:u,onChange:e=>{return s=e.target.value,void m(s);var s},className:l.searchInput})]}),e.jsxs("div",{className:l.filters,children:[e.jsxs("select",{value:p,onChange:e=>j(e.target.value),className:l.filterSelect,children:[e.jsx("option",{value:"all",children:"All Genres"}),(()=>{const e=new Set;return o.forEach((s=>{s.genre&&s.genre.split(", ").forEach((s=>e.add(s)))})),Array.from(e).sort()})().map((s=>e.jsx("option",{value:s,children:s},s)))]}),e.jsxs("select",{value:v,onChange:e=>x(e.target.value),className:l.filterSelect,children:[e.jsx("option",{value:"all",children:"All Years"}),(()=>{const e=new Set(o.map((e=>e.year)).filter(Boolean));return Array.from(e).sort(((e,s)=>(s||"").localeCompare(e||"")))})().map((s=>e.jsx("option",{value:s,children:s},s)))]}),e.jsxs("select",{value:y,onChange:e=>f(e.target.value),className:l.filterSelect,children:[e.jsx("option",{value:"title",children:"Sort by Title"}),e.jsx("option",{value:"year",children:"Sort by Year"}),e.jsx("option",{value:"rating",children:"Sort by Rating"})]})]})]}),e.jsxs(s.div,{className:l.results,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:l.resultsHeader,children:[e.jsxs("h2",{className:l.resultsTitle,children:[d.length," ",(d.length,"Series")," Found"]}),u&&e.jsxs("p",{className:l.searchQuery,children:['Showing results for "',u,'"']})]}),d.length>0?e.jsx("div",{className:l.moviesGrid,children:d.map(((a,t)=>e.jsx(s.div,{variants:b,transition:{delay:.1*t},children:e.jsx(r,{item:a})},`${a.id}-${t}`)))}):e.jsxs("div",{className:l.noResults,children:[e.jsx("h3",{children:"No series found"}),e.jsx("p",{children:"Try adjusting your search terms or filters"})]})]})]})})};export{o as Series};
